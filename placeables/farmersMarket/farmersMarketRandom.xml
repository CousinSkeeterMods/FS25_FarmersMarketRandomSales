<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<placeable type="farmersMarketRandom" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../../shared/xml/schema/placeable.xsd">
    <storeData>
        <name>
            <en>Farmers Market with Daily Sales</en>
        </name>
        <functions>
            <!-- Show as a production/market in the store UI -->
            <function>$l10n_function_productionPoint</function>
        </functions>
        <image>store_farmersMarketUS.dds</image>
        <price>180000</price>
        <lifetime>1000</lifetime>
        <rotation>0</rotation>
        <brand>NONE</brand>
        <species>PLACEABLE</species>

        <!-- Show under production points category -->
        <category>productionPoints</category>

        <brush>
            <type>placeable</type>
            <category>production</category>
            <tab>productionPoints</tab>
        </brush>
        <vertexBufferMemoryUsage>1974016</vertexBufferMemoryUsage>
        <indexBufferMemoryUsage>466176</indexBufferMemoryUsage>
        <textureMemoryUsage>3276800</textureMemoryUsage>
        <instanceVertexBufferMemoryUsage>0</instanceVertexBufferMemoryUsage>
        <instanceIndexBufferMemoryUsage>0</instanceIndexBufferMemoryUsage>
        <audioMemoryUsage>0</audioMemoryUsage>
    </storeData>

    <base>
        <filename>farmersMarketUS.i3d</filename>
        <canBeRenamed>true</canBeRenamed>
    </base>

    <placement useRandomYRotation="false" useManualYRotation="true">
        <testAreas>
            <testArea startNode="testAreaStart01" endNode="testAreaEnd01"/>
        </testAreas>
        <sounds>
            <place template="largeImp"/>
        </sounds>
    </placement>

    <clearAreas>
        <clearArea startNode="clearAreaStart01" widthNode="clearAreaWidth01" heightNode="clearAreaHeight01"/>
    </clearAreas>

    <leveling requireLeveling="true" maxSmoothDistance="10" maxSlope="75" maxEdgeAngle="30">
        <levelAreas>
            <levelArea startNode="levelAreaStart01" widthNode="levelAreaWidth01" heightNode="levelAreaHeight01" groundType="asphalt"/>
        </levelAreas>
        <paintAreas>
            <paintArea startNode="paintAreaStart01" widthNode="paintAreaWidth01" heightNode="paintAreaHeight01" groundType="asphalt"/>
        </paintAreas>
    </leveling>

    <indoorAreas>
        <indoorArea startNode="indoorAreaStart01" widthNode="indoorAreaWidth01" heightNode="indoorAreaHeight01"/>
        <indoorArea startNode="indoorAreaStart02" widthNode="indoorAreaWidth02" heightNode="indoorAreaHeight02"/>
        <indoorArea startNode="indoorAreaStart03" widthNode="indoorAreaWidth03" heightNode="indoorAreaHeight03"/>
    </indoorAreas>

    <tipOcclusionUpdateAreas>
        <tipOcclusionUpdateArea startNode="tipOcclusionUpdateAreaStart01" endNode="tipOcclusionUpdateAreaEnd01"/>
    </tipOcclusionUpdateAreas>

    <ai>
        <updateAreas>
            <updateArea startNode="tipOcclusionUpdateAreaStart01" endNode="tipOcclusionUpdateAreaEnd01"/>
        </updateAreas>
    </ai>

    <infoTrigger triggerNode="infoTrigger"/>

    <triggerMarkers>
        <triggerMarker node="unloadTriggerMarker" filename="$data/shared/assets/marker/markerIconUnload.i3d" adjustToGround="true"/>
        <triggerMarker node="palletTrigger" filename="$data/shared/assets/marker/markerIconPallet.i3d" adjustToGround="true"/>
        <triggerMarker node="warningStripes01"/>
    </triggerMarkers>

    <hotspots>
        <hotspot type="UNLOADING" linkNode="unloadTriggerMarker" teleportNode="unloadTriggerMarker"/>
    </hotspots>

    <dynamicallyLoadedParts>
        <dynamicallyLoadedPart filename="$data/placeables/shared/sellingStationGeneric/sellingStationGenericNoCover.i3d" node="0" linkNode="unloadTriggerLinkNode" rotation="0 90 0"/>
        <dynamicallyLoadedPart filename="$data/placeables/mapUS/farmersMarketUS/farmersMarketUSProps.i3d" node="0" linkNode="props"/>
    </dynamicallyLoadedParts>

    <animatedObjects>
        <animatedObject saveId="gate01">
            <animation duration="3.5">
                <part node="gate01_doorLeft">
                    <keyFrame time="0" translation="1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
                <part node="gate01_doorRight">
                    <keyFrame time="0" translation="-1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
            </animation>
            <controls triggerNode="triggerGate01" posAction="ACTIVATE_HANDTOOL" posText="action_openGate" negText="action_closeGate"/>
            <sounds>
                <moving linkNode="gate01_doorLeft" template="slidingGateWoodLoop"/>
                <posEnd linkNode="gate01_doorLeft" template="woodDoorOpen"/>
                <negEnd linkNode="gate01_doorLeft" template="woodDoorClose"/>
            </sounds>
        </animatedObject>

        <animatedObject saveId="gate02">
            <animation duration="3.5">
                <part node="gate02_doorLeft">
                    <keyFrame time="0" translation="1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
                <part node="gate02_doorRight">
                    <keyFrame time="0" translation="-1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
            </animation>
            <controls triggerNode="triggerGate02" posAction="ACTIVATE_HANDTOOL" posText="action_openGate" negText="action_closeGate"/>
            <sounds>
                <moving linkNode="gate02_doorLeft" template="slidingGateWoodLoop"/>
                <posEnd linkNode="gate02_doorLeft" template="woodDoorOpen"/>
                <negEnd linkNode="gate02_doorLeft" template="woodDoorClose"/>
            </sounds>
        </animatedObject>

        <animatedObject saveId="gate03">
            <animation duration="3.5">
                <part node="gate03_doorLeft">
                    <keyFrame time="0" translation="-1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
                <part node="gate03_doorRight">
                    <keyFrame time="0" translation="1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
            </animation>
            <controls triggerNode="triggerGate03" posAction="ACTIVATE_HANDTOOL" posText="action_openGate" negText="action_closeGate"/>
            <sounds>
                <moving linkNode="gate03_doorRight" template="slidingGateWoodLoop"/>
                <posEnd linkNode="gate03_doorRight" template="woodDoorOpen"/>
                <negEnd linkNode="gate03_doorRight" template="woodDoorClose"/>
            </sounds>
        </animatedObject>

        <animatedObject saveId="gate04">
            <animation duration="3.5">
                <part node="gate04_doorLeft">
                    <keyFrame time="0" translation="-1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
                <part node="gate04_doorRight">
                    <keyFrame time="0" translation="1.186 0 0"/>
                    <keyFrame time="1" translation="0 0 0"/>
                </part>
            </animation>
            <controls triggerNode="triggerGate04" posAction="ACTIVATE_HANDTOOL" posText="action_openGate" negText="action_closeGate"/>
            <sounds>
                <moving linkNode="gate04_doorRight" template="slidingGateWoodLoop"/>
                <posEnd linkNode="gate04_doorRight" template="woodDoorOpen"/>
                <negEnd linkNode="gate04_doorRight" template="woodDoorClose"/>
            </sounds>
        </animatedObject>

        <animatedObject saveId="door01">
            <animation duration="1.5">
                <part node="door01">
                    <keyFrame time="0.25" rotation="0 0 0"/>
                    <keyFrame time="1.25" rotation="0 95 0"/>
                </part>
                <part node="door01Opener">
                    <keyFrame time="0.00" rotation="0 0 0"/>
                    <keyFrame time="0.25" rotation="0 0 -25"/>
                    <keyFrame time="0.75" rotation="0 0 0"/>
                </part>
            </animation>
            <controls triggerNode="triggerDoor01" posAction="ACTIVATE_HANDTOOL" posText="action_openGate" negText="action_closeGate"/>
            <sounds>
                <moving linkNode="door01" template="woodDoorSqueaksSmall"/>
                <posEnd linkNode="door01" template="woodDoorOpen"/>
                <negEnd linkNode="door01" template="woodDoorCloseRandom"/>
            </sounds>
        </animatedObject>

        <animatedObject saveId="door02">
            <animation duration="1.5">
                <part node="door02">
                    <keyFrame time="0.25" rotation="0 0 0"/>
                    <keyFrame time="1.25" rotation="0 95 0"/>
                </part>
                <part node="door02Opener">
                    <keyFrame time="0.00" rotation="0 0 0"/>
                    <keyFrame time="0.25" rotation="0 0 25"/>
                    <keyFrame time="0.75" rotation="0 0 0"/>
                </part>
            </animation>
            <controls triggerNode="triggerDoor02" posAction="ACTIVATE_HANDTOOL" posText="action_openGate" negText="action_closeGate"/>
            <sounds>
                <moving linkNode="door02" template="woodDoorSqueaksSmall"/>
                <posEnd linkNode="door02" template="woodDoorOpen"/>
                <negEnd linkNode="door02" template="woodDoorCloseRandom"/>
            </sounds>
        </animatedObject>
    </animatedObjects>

    <!-- PRODUCTION POINT WITH CATEGORY-BASED STORAGE + RANDOM SELLING -->
    <productionPoint saveId="farmersMarket" appearsOnStats="true">
        <!-- Ambient sound -->
        <sounds>
            <idle template="farmersMarketIndoor" volumeScale="3"/>
        </sounds>

        <!-- One big consignment storage using categories, supports future fillTypes -->
        <storage>
            <storageItem
                fillTypeCategories="SELLINGSTATION_FIELDFRUITS SELLINGSTATION_PRODUCTS SELLINGSTATION_PRODUCTSFOOD SELLINGSTATION_BALES"
                capacity="150000" />
        </storage>

        <!-- Trailer, pallet, and bale unloading using categories -->
        <unloadingStations>
            <!-- Trailer unloading -->
            <unloadingStation stationName="$l10n_ui_unload"
                              exactFillRootNode="exactFillNodeGrain"
                              fillTypeCategories="SELLINGSTATION_FIELDFRUITS SELLINGSTATION_PRODUCTS SELLINGSTATION_PRODUCTSFOOD SELLINGSTATION_BALES"
                              fillTypesExclude="FORAGE"
                              aiNode="unloadTriggerAINode"
                              supportsExtension="false"/>

            <!-- Pallet unloading -->
            <unloadingStation stationName="$l10n_ui_unload_pallets"
                              triggerNode="palletTrigger"
                              fillTypeCategories="SELLINGSTATION_PRODUCTS SELLINGSTATION_PRODUCTSFOOD"
                              fillTypesExclude="FORAGE"/>

            <!-- Bale unloading -->
            <unloadingStation stationName="$l10n_ui_unload_bales"
                              triggerNode="baleTrigger"
                              fillTypeCategories="SELLINGSTATION_BALES"
                              fillTypesExclude="FORAGE"
                              deleteLitersPerSecond="10000"/>
        </unloadingStations>

        <!-- Visual fill planes so the market looks stocked -->
        <simpleFillplanes>
            <simpleFillplane node="fillplane_springOnion"  fillTypes="SPRING_ONION"/>
            <simpleFillplane node="fillplane_potato"       fillTypes="POTATO"/>
            <simpleFillplane node="fillplane_riceLongGrain" fillTypes="RICELONGGRAIN"/>
            <simpleFillplane node="fillplane_rice"         fillTypes="RICE"/>
            <simpleFillplane node="fillplane_chilli"       fillTypes="CHILLI"/>
            <simpleFillplane node="fillplane_sugar"        fillTypes="SUGAR"/>
            <simpleFillplane node="fillplane_parsnip"      fillTypes="PARSNIP"/>
            <simpleFillplane node="fillplane_spinach"      fillTypes="SPINACH"/>
            <simpleFillplane node="fillplane_olive"        fillTypes="OLIVE"/>
            <simpleFillplane node="fillplane_grape"        fillTypes="GRAPE"/>
            <simpleFillplane node="fillplane_carrot"       fillTypes="CARROT"/>
            <simpleFillplane node="fillplane_enoki"        fillTypes="ENOKI"/>
            <simpleFillplane node="fillplane_garlic"       fillTypes="GARLIC"/>
            <simpleFillplane node="fillplane_tomato"       fillTypes="TOMATO"/>
            <simpleFillplane node="fillplane_strawberries" fillTypes="STRAWBERRY"/>
            <simpleFillplane node="fillplane_oyster"       fillTypes="OYSTER"/>
        </simpleFillplanes>

        <!-- RANDOM RAW SALES CONFIG
             Script will sell between 5% and 16% of each stored product every in-game hour -->
        <randomSell minPercent="5" maxPercent="16" />
    </productionPoint>

    <i3dMappings>
        <i3dMapping id="farmersMarketUS" node="0>"/>
        <i3dMapping id="clearAreaStart01" node="0>0|0"/>
        <i3dMapping id="clearAreaWidth01" node="0>0|0|0"/>
        <i3dMapping id="clearAreaHeight01" node="0>0|0|1"/>
        <i3dMapping id="levelAreaStart01" node="0>1|0"/>
        <i3dMapping id="levelAreaWidth01" node="0>1|0|0"/>
        <i3dMapping id="levelAreaHeight01" node="0>1|0|1"/>
        <i3dMapping id="paintAreaStart01" node="0>2|0"/>
        <i3dMapping id="paintAreaWidth01" node="0>2|0|0"/>
        <i3dMapping id="paintAreaHeight01" node="0>2|0|1"/>
        <i3dMapping id="indoorAreaStart01" node="0>3|0"/>
        <i3dMapping id="indoorAreaWidth01" node="0>3|0|0"/>
        <i3dMapping id="indoorAreaHeight01" node="0>3|0|1"/>
        <i3dMapping id="indoorAreaStart02" node="0>3|1"/>
        <i3dMapping id="indoorAreaWidth02" node="0>3|1|0"/>
        <i3dMapping id="indoorAreaHeight02" node="0>3|1|1"/>
        <i3dMapping id="indoorAreaStart03" node="0>3|2"/>
        <i3dMapping id="indoorAreaWidth03" node="0>3|2|0"/>
        <i3dMapping id="indoorAreaHeight03" node="0>3|2|1"/>
        <i3dMapping id="testAreaStart01" node="0>4|0"/>
        <i3dMapping id="testAreaEnd01" node="0>4|0|0"/>
        <i3dMapping id="tipOcclusionUpdateAreaStart01" node="0>5|0"/>
        <i3dMapping id="tipOcclusionUpdateAreaEnd01" node="0>5|0|0"/>
        <i3dMapping id="infoTrigger" node="0>6"/>
        <i3dMapping id="gate01_doorLeft" node="0>7|0|0"/>
        <i3dMapping id="gate01_doorRight" node="0>7|1|0"/>
        <i3dMapping id="gate02_doorLeft" node="0>7|2|0"/>
        <i3dMapping id="gate02_doorRight" node="0>7|3|0"/>
        <i3dMapping id="gate03_doorLeft" node="0>7|4|0"/>
        <i3dMapping id="gate03_doorRight" node="0>7|5|0"/>
        <i3dMapping id="gate04_doorLeft" node="0>7|6|0"/>
        <i3dMapping id="gate04_doorRight" node="0>7|7|0"/>
        <i3dMapping id="door01" node="0>7|8|0"/>
        <i3dMapping id="door01Opener" node="0>7|8|0|0"/>
        <i3dMapping id="door02" node="0>7|9|0"/>
        <i3dMapping id="door02Opener" node="0>7|9|0|0"/>
        <i3dMapping id="triggerGate01" node="0>7|10"/>
        <i3dMapping id="triggerGate02" node="0>7|11"/>
        <i3dMapping id="triggerGate03" node="0>7|12"/>
        <i3dMapping id="triggerGate04" node="0>7|13"/>
        <i3dMapping id="triggerDoor01" node="0>7|14"/>
        <i3dMapping id="triggerDoor02" node="0>7|15"/>
        <i3dMapping id="sellingStation" node="0>8"/>
        <i3dMapping id="exactFillNodeGrain" node="0>8|0|0"/>
        <i3dMapping id="unloadTriggerMarker" node="0>8|0|1"/>
        <i3dMapping id="unloadTriggerAINode" node="0>8|0|2"/>
        <i3dMapping id="unloadTriggerLinkNode" node="0>8|0|3"/>
        <i3dMapping id="baleTrigger" node="0>8|1|0"/>
        <i3dMapping id="palletTrigger" node="0>8|1|1"/>
        <i3dMapping id="baleTriggerAINode" node="0>8|1|2"/>
        <i3dMapping id="warningStripes01" node="0>8|1|3"/>
        <i3dMapping id="props" node="0>9|0"/>
        <i3dMapping id="fillplane_enoki" node="0>10|1|9"/>
        <i3dMapping id="fillplane_springOnion" node="0>10|1|10"/>
        <i3dMapping id="fillplane_potato" node="0>10|1|11"/>
        <i3dMapping id="fillplane_riceLongGrain" node="0>10|1|12"/>
        <i3dMapping id="fillplane_rice" node="0>10|1|13"/>
        <i3dMapping id="fillplane_chilli" node="0>10|1|14"/>
        <i3dMapping id="fillplane_sugar" node="0>10|1|15"/>
        <i3dMapping id="fillplane_parsnip" node="0>10|1|16"/>
        <i3dMapping id="fillplane_spinach" node="0>10|1|17"/>
        <i3dMapping id="fillplane_olive" node="0>10|1|18"/>
        <i3dMapping id="fillplane_grape" node="0>10|1|19"/>
        <i3dMapping id="fillplane_carrot" node="0>10|1|20"/>
        <i3dMapping id="fillplane_garlic" node="0>10|1|21"/>
        <i3dMapping id="fillplane_tomato" node="0>10|1|22"/>
        <i3dMapping id="fillplane_strawberries" node="0>10|1|23"/>
        <i3dMapping id="fillplane_oyster" node="0>10|1|24"/>
    </i3dMappings>
</placeable>
